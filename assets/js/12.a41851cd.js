(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{177:function(t,s,a){"use strict";a.r(s);var n={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=a(5),r=Object(e.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[a("h1",{attrs:{id:"server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server","aria-hidden":"true"}},[t._v("#")]),t._v(" Server")]),t._v(" "),a("p",[t._v("You can configure server behaviors with a simple file "),a("code",[t._v("server.config.js")]),t._v(" located in the root\nfolder of your application.")]),t._v(" "),a("h2",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),a("p",[t._v("Like UVue plugins, you can install or write your own plugins for server side.\nThese plugins can add middlewares to HTTP server, log things during each HTTP requests, or rewrite\nHTML output sended to clients.")]),t._v(" "),a("p",[t._v("See more informations: "),a("router-link",{attrs:{to:"/plugins/server.html"}},[t._v("Server plugins")])],1),t._v(" "),a("h2",{attrs:{id:"https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https","aria-hidden":"true"}},[t._v("#")]),t._v(" HTTPS")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("server.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  https"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    key"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    cert"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"vue-renderer-directives"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-renderer-directives","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue renderer / directives")]),t._v(" "),a("p",[t._v("For Vue directives you have to rewrite them make them compatible with SSR. You can define\nthese rewrites in server config file:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  renderer"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    directives"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// Place your directives here")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You can also customize cache used by renderer (default to "),a("code",[t._v("lru-cache")]),t._v(") or change\n"),a("code",[t._v("preload")]),t._v(" and "),a("code",[t._v("prefetch behaviors")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  renderer"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cache"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    shouldPrefetch"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    shouldPreload"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("More informations:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://ssr.vuejs.org/guide/universal.html#access-to-platform-specific-apis",target:"_blank",rel:"noopener noreferrer"}},[t._v("Custom directives with SSR"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://ssr.vuejs.org/api/#directives",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Directives"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://ssr.vuejs.org/guide/caching.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cache"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://ssr.vuejs.org/api/#shouldpreload",target:"_blank",rel:"noopener noreferrer"}},[t._v("shouldPreload / shouldPrefetch"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"dev-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dev-server","aria-hidden":"true"}},[t._v("#")]),t._v(" Dev server")]),t._v(" "),a("p",[t._v("In development mode, you can customize HMR behaviors too:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  devServer"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    middleware"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    hot"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("You can watch for files changes and reload automatically your server if changes occurs.")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("server.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  watch"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'server.config.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'src/server/**/*.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  watchIgnore"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You can also type "),a("code",[t._v("rs")]),t._v(" in your terminal to reload the server.")])]),t._v(" "),a("p",[t._v("See more informations:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/webpack/webpack-dev-middleware#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dev middleware options"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/webpack-contrib/webpack-hot-middleware#documentation",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hot middleware options"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"adapters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adapters","aria-hidden":"true"}},[t._v("#")]),t._v(" Adapters")]),t._v(" "),a("p",[t._v("By default UVue use a "),a("a",{attrs:{href:"https://github.com/senchalabs/connect#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("connect"),a("OutboundLink")],1),t._v(" instance to process\nHTTP requests and send responses to clients, but you can change this very easly.")]),t._v(" "),a("h3",{attrs:{id:"use-express"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-express","aria-hidden":"true"}},[t._v("#")]),t._v(" Use Express")]),t._v(" "),a("p",[t._v("First install dependency:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" express\n")])])]),a("p",[t._v("Then setup your server configuration to use "),a("code",[t._v("ExpressAdapter")]),t._v(", in "),a("code",[t._v("server.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ExpressAdapter "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@uvue/server'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  adapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ExpressAdapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"use-fastify"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-fastify","aria-hidden":"true"}},[t._v("#")]),t._v(" Use Fastify")]),t._v(" "),a("p",[t._v("First install dependency:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" fastify\n")])])]),a("p",[t._v("Then setup your server configuration to use "),a("code",[t._v("FastifyAdapter")]),t._v(", in "),a("code",[t._v("server.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FastifyAdapter "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@uvue/server'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  adapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" FastifyAdapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("request")]),t._v(" and "),a("code",[t._v("reply")]),t._v(" objects from Fastify framework will be injected to the "),a("router-link",{attrs:{to:"/reference/#context"}},[a("code",[t._v("context")])]),t._v(" object.")],1)]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Current "),a("a",{attrs:{href:"http://uvue.yabab.net/",target:"_blank",rel:"noopener noreferrer"}},[t._v("live demo"),a("OutboundLink")],1),t._v(" use fastify, you can check source code here:\n"),a("a",{attrs:{href:"https://github.com/universal-vue/examples",target:"_blank",rel:"noopener noreferrer"}},[t._v("universal-vue/examples"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"use-koa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-koa","aria-hidden":"true"}},[t._v("#")]),t._v(" Use Koa")]),t._v(" "),a("p",[t._v("First install dependencies:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" koa koa-mount koa-static koa-compress\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -D koa-webpack "),a("span",{attrs:{class:"token comment"}},[t._v("# For ssr:serve command")]),t._v("\n")])])]),a("p",[t._v("Then setup your server configuration to use "),a("code",[t._v("KoaAdapter")]),t._v(", in "),a("code",[t._v("server.config.js")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" KoaAdapter "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'@uvue/server'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  adapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" KoaAdapter"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("ctx")]),t._v(" object from Koa framework will be injected to the "),a("router-link",{attrs:{to:"/reference/#context"}},[a("code",[t._v("context")])]),t._v(" object")],1)])])},[],!1,null,null,null);r.options.__file="server.md";s.default=r.exports}}]);